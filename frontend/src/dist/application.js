!function(t,n,a,i){var o={TPL:a.templates};o.start=function(){n.history.start({pushState:!0,trigger:!0})},window.app=o}(window.jQuery,window.Backbone,Handlebars,window._);
!function(e,r){"use strict";e.ContactService=function(){function e(e){var t=r.Deferred();return r.ajax(e).then(t.resolve).fail(t.reject),t.promise()}function t(t){var n,o=r.Deferred();return t=r.extend(t,{url:"http://dev.metodomicroinfo.com.br/index.html"}),n=e(t),n.then(o.resolve).fail(o.reject),o.promise}return{doRequest:e,send:t}}}(app,jQuery);

var FooterView=Backbone.View.extend({template:app.TPL.component.layout.footer.view,el:".footer-region",options:{data:{}},render:function(){this.$el.html(this.template(this.options.data))}}),footerView=new FooterView;footerView.render();
!function(e){var t=Backbone.View;e.headerView=t.extend({template:e.TPL.component.layout.header.view,el:".header-region",options:{data:{}},constructor:function(){t.apply(this,arguments),this.on("render",this._setupScroll).on("render",this._setupScrollSpy).render()},_setupScroll:function(){this.$el.find("a.page-scroll").on("click",function(e){var t=$(e.currentTarget),o=t.attr("href"),n=$(o);e.preventDefault(),console.log(e),$("html, body").stop().animate({scrollTop:n.offset().top-50},500)}.bind(this))},_setupScrollSpy:function(){$("body").scrollspy({target:".navbar-fixed-top",offset:70})},render:function(){return this.$el.html(this.template(this.options.data)),this.trigger("render"),this}}),new e.headerView}(window.app);


!function(e,r){function o(e){var o=r.Deferred(),n=function(r){return r=JSON.parse(r),o.resolve(r[e]).promise()},t=function(e){};return r.ajax({url:i+"data/courses"}).then(n).fail(t),o.promise()}var i="http://api.metodomicroinfo.com.br/";e.service=e.service||{},e.service.getCourse=o}(window.app,jQuery);
!function(e,o){"use strict";var t=Backbone.Router;e.HomeRouter=t.extend({routes:{"curso/:name":"getCourse"},getCourse:function(o){var t;console.log("Curso -> ",o),t=e.service.getCourse(o),t.then(function(e){console.log("data: ",e)})}});new e.HomeRouter;e.start()}(window.app,jQuery);
!function(e,t){"use strict";var n=Backbone.View;e.homeView=n.extend({template:e.TPL.component.page.home.view,el:".context-region",options:{data:{}},constructor:function(){n.apply(this,arguments),this.on("render",this._setupProcessLine).on("render",this._setupModal).on("render",this._setupContactForm.bind(this)).render()},_setupUI:function(){this.ui={contactForm:this.$el.find("#contact-frm")}},_setupProcessLine:function(){function e(){var e,a,o="addClass",s=t(window);n.each(function(){e=t(this),(a=e.offset().top<s.scrollTop()+s.height()-300)||(o="removeClass"),e[o]("active").closest("li")[o]("active").find(".line")[o]("active")})}var n=t(".process-node");t(window).scroll(function(){e()})},_setupModal:function(){var n=t('a[data-toggle="modal"]');n.on("click",function(n){var a,o=t(this),s=o.attr("href"),i=s.replace("#","");n.preventDefault(),a=e.service.getCourse(i),a.then(function(n){var a=t(o.data("target")),s=e.shared.modal.View,i=new s({data:n});a.find(".modal-content").append(i.$el.html()).end().modal("show")})})},_setupContactForm:function(){var e=t("#contact-frm"),n={rules:{name:{required:!0},email:{required:!0,email:!0},phone:{required:!1,number:!0},message:{required:!0}}},a={defaultMessages:{required:"Este campo é requerido.",email:'Informe e-mail no formato "usuario@servidor.com".',number:"Informe apenas números."}},o=new FormValidator(e.get(0),n,a);e.get(0).submit=function(){var t=e.serializeArray(),n={};t.forEach(function(e){n[e.name]=e.value}),o.valid()&&this.sendContact(n)}.bind(this)},sendContact:function(n){function a(){i.button("loading"),r.find(d).prop("disabled",!0)}function o(){i.button("reset"),r.find(d).removeAttr("disabled")}function s(){setTimeout(function(){c.addClass("hidden").removeClass("alert-success")},5e3)}var i=t("#contact-send"),r=t("#contact-frm"),d='[name="name"], [name="email"], [name="phone"], [name="message"]',c=t("#contact-message"),m=e.ContactService();a(),m.doRequest(n).then(function(e){console.log("response -> ",e),c.addClass("alert-success").find(".message").html('<i class="fa fa-check"></i> Contato enviado com sucesso! Em breve retornaremos.').end().removeClass("hidden"),o(),s()}).fail(function(){c.addClass("alert-danger").find(".message").html('<i class="fa fa-remove"></i> Ops! Problema ao enviar dados. Tente novamente mais tarde.').end().removeClass("hidden"),o()})},render:function(){return this.$el.html(this.template(this.options.data)),this.trigger("render"),this}}),new e.homeView}(window.app,jQuery,window.FormValidator);

!function(e,r){function a(e,r){var a;return r=r||"-",a=e.toLowerCase(),a=a.replace(/\-/g,""),a=a.replace(/\s/g,r),a=a.replace(/[áàã]/g,"a"),a=a.replace(/é/g,"e"),a=a.replace(/í/g,"i"),a=a.replace(/ó/g,"o"),a=a.replace(/ú/g,"u"),a=a.replace(/ç/g,"c")}e.slug=a,r.registerHelper("slug",function(e){return a(e,"-")})}(app.helpers=app.helpers||{},Handlebars);
!function(t,e){"use strict";var i=Backbone.View;t.modal||(t.modal={}),t.modal.View=i.extend({template:app.TPL.component.shared.modal.view,initialize:function(t){this.options=t},constructor:function(){i.apply(this,arguments),this.render()},render:function(){return this.$el.html(this.template(this.options.data)),this.trigger("render"),this}})}(app.shared=app.shared||{},jQuery);
!function(n){}(jQuery);
//# sourceMappingURL=src/maps/application.js.map
